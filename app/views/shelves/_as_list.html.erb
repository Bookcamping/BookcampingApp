<%= div_for shelf do %>
  <div class="header">
    <%= render 'header' %>
  </div>

  <div class="new_shelf_item_quick alert alert-block" style="display: none">
    <% reference = Reference.new %>
    <%= simple_form_for reference do |form| %>
      <%= hidden_field_tag :s, shelf.id if shelf %>
      <%= form.input :title, as: :autocomplete, url: autocomplete_reference_title_references_path %>
      <%= form.submit 'AÃ±adir' %>
    <% end %>
  </div>

  <div class="references list">
    <%= render 'filters' %>
    <% cache ['list_items', shelf] do %>
      <%= render partial: 'shelf_items/as_list_item', as: :item,
        collection: shelf.shelf_items.includes([{:reference => [:license, :tags]}, :shelf, :user]).reorder('created_at DESC') %>
    <% end %>
  </div>
<% end %>
